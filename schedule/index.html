<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Free AI Audit | Samuel Holley AI Consulting</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <!-- Your standard navigation bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="https://home.samuelholley.com"><img src="../phoenix-transparent.png" alt="Samuel Holley AI Consulting Logo" style="height: 50px;"></a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="https://home.samuelholley.com" class="nav-link">Home</a>
                <a href="https://reclaim.samuelholley.com" class="nav-link">Framework</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="schedule-page-container">
        <div class="section-header">
            <h1>Book Your Free AI Audit</h1>
            <p class="section-subtitle">Choose a time that works for you below.</p>
        </div>

        <!-- The new, high-quality Calendly embed -->
        <div class="calendly-placeholder">
            <!-- v5: High-Fidelity Loading Skeleton -->
            <div class="skeleton-loader">
                <!-- Month/Year Header -->
                <div class="skeleton-header">
                    <div class="skeleton-shape skeleton-line" style="width: 35%; height: 28px;"></div>
                </div>
                
                <!-- Month Navigation -->
                <div class="skeleton-month-nav">
                    <div class="skeleton-shape skeleton-nav-arrow"></div>
                    <div class="skeleton-shape skeleton-line" style="width: 25%; height: 20px;"></div>
                    <div class="skeleton-shape skeleton-nav-arrow"></div>
                </div>

                <!-- Days of the Week -->
                <div class="skeleton-weekdays">
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                </div>

                <!-- Calendar Grid (Now populated by script at the end of the body) -->
                <div class="skeleton-calendar-grid">
                </div>
                
                <!-- Time Zone Selector -->
                <div class="skeleton-footer">
                    <div class="skeleton-shape skeleton-line" style="width: 45%; height: 20px;"></div>
                </div>
            </div>

            <!-- The Calendly Widget (hidden by default) -->
            <div id="calendly-embed" class="calendly-inline-widget" data-url="https://calendly.com/samuelholleyai/30min?hide_event_type_details=1&hide_gdpr_banner=1&background_color=fdf5f1"></div>
        </div>
    </main>
    
    <!-- Your standard footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Â© 2025 Samuel Holley | AI Consulting. All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript"></script>
    <script src="../app.js"></script>
    <script>
        // --- SCRIPT FOR CALENDLY SKELETON LOADER (v7 - SIMPLIFIED & ROBUST) ---

        // 1. Immediately build the skeleton grid.
        // This script is at the end of the body, so the '.skeleton-calendar-grid'
        // element is guaranteed to exist when this code runs.
        const grid = document.querySelector('.skeleton-calendar-grid');
        if (grid) {
            for (let i = 0; i < 35; i++) {
                const cell = document.createElement('div');
                cell.className = 'skeleton-shape skeleton-date-box';
                if (Math.random() > 0.8) {
                   cell.style.opacity = '0.4';
                }
                grid.appendChild(cell);
            }
        }

        // 2. Immediately attach the event listener.
        // This is the most critical change. The listener is attached instantly,
        // ensuring it is ready before Calendly has any chance to send its message.
        window.addEventListener('message', function handleCalendlyLoad(e) {
            // We only care about the specific event that confirms the view has loaded.
            if (e.data.event && e.data.event === 'calendly.event_type_viewed') {
                const embed = document.getElementById('calendly-embed');
                const skeleton = document.querySelector('.skeleton-loader');

                if (embed) {
                    // Trigger the fade-in for the real embed.
                    embed.setAttribute('data-loaded', 'true');
                }
                if (skeleton) {
                    // Trigger the fade-out for the skeleton.
                    skeleton.setAttribute('data-hidden', 'true');
                }
                
                // Important: Clean up the listener after it has done its job
                // to prevent it from running again accidentally.
                window.removeEventListener('message', handleCalendlyLoad);
            }
        });
    </script>
</body>
</html>
