<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Free AI Audit | Samuel Holley AI Consulting</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <!-- Your standard navigation bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="https://home.samuelholley.com"><img src="../phoenix-transparent.png" alt="Samuel Holley AI Consulting Logo" style="height: 50px;"></a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="https://home.samuelholley.com" class="nav-link">Home</a>
                <a href="https://reclaim.samuelholley.com" class="nav-link">Framework</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="schedule-page-container">
        <div class="section-header">
            <h1>Book Your Free AI Audit</h1>
            <p class="section-subtitle">Choose a time that works for you below.</p>
        </div>

        <!-- The new, high-quality Calendly embed -->
        <div class="calendly-placeholder">
            <!-- v5: High-Fidelity Loading Skeleton -->
            <div class="skeleton-loader">
                <!-- Month/Year Header -->
                <div class="skeleton-header">
                    <div class="skeleton-shape skeleton-line" style="width: 35%; height: 28px;"></div>
                </div>
                
                <!-- Month Navigation -->
                <div class="skeleton-month-nav">
                    <div class="skeleton-shape skeleton-nav-arrow"></div>
                    <div class="skeleton-shape skeleton-line" style="width: 25%; height: 20px;"></div>
                    <div class="skeleton-shape skeleton-nav-arrow"></div>
                </div>

                <!-- Days of the Week -->
                <div class="skeleton-weekdays">
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                    <div class="skeleton-shape skeleton-weekday"></div>
                </div>

                <!-- Calendar Grid (Now populated by script at the end of the body) -->
                <div class="skeleton-calendar-grid">
                </div>
                
                <!-- Time Zone Selector -->
                <div class="skeleton-footer">
                    <div class="skeleton-shape skeleton-line" style="width: 45%; height: 20px;"></div>
                </div>
            </div>

            <!-- The Calendly Widget (hidden by default) -->
            <div id="calendly-embed" class="calendly-inline-widget" data-url="https://calendly.com/samuelholleyai/30min?hide_event_type_details=1&hide_gdpr_banner=1&background_color=fdf5f1"></div>
        </div>
    </main>
    
    <!-- Your standard footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Â© 2025 Samuel Holley | AI Consulting. All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script src="../app.js"></script>
    <script>
        // --- SCRIPT FOR CALENDLY SKELETON LOADER ---

        // This function builds the skeleton grid dynamically.
        function buildSkeletonGrid() {
            const grid = document.querySelector('.skeleton-calendar-grid');
            // A check to make sure the grid element exists before we use it.
            if (!grid) {
                console.error('Skeleton grid container not found!');
                return;
            }

            // Generate 35 "date" boxes to fill the calendar.
            for (let i = 0; i < 35; i++) {
                const cell = document.createElement('div');
                cell.className = 'skeleton-shape skeleton-date-box';
                // Randomly make some cells fainter to mimic disabled dates.
                if (Math.random() > 0.8) {
                   cell.style.opacity = '0.4';
                }
                grid.appendChild(cell);
            }
        }

        // This function handles the fade-out/fade-in transition once Calendly confirms it has loaded.
        function handleCalendlyLoad(e) {
            // We only care about events coming from Calendly.
            if (e.data.event && e.data.event.indexOf('calendly') === 0) {
                // Specifically, wait for the 'event_type_viewed' event.
                if (e.data.event === 'calendly.event_type_viewed') {
                    const embed = document.getElementById('calendly-embed');
                    const skeleton = document.querySelector('.skeleton-loader');

                    if (embed) {
                        // This data-attribute triggers our CSS to fade the widget in.
                        embed.setAttribute('data-loaded', 'true');
                    }
                    if (skeleton) {
                        // This data-attribute triggers our CSS to fade the skeleton out.
                        skeleton.setAttribute('data-hidden', 'true');
                    }
                    
                    // Once our job is done, we can stop listening to prevent any potential duplicate triggers.
                    window.removeEventListener('message', handleCalendlyLoad);
                }
            }
        }

        // --- SCRIPT EXECUTION ---

        // 1. Build the skeleton grid as soon as the page's HTML is ready.
        document.addEventListener('DOMContentLoaded', buildSkeletonGrid);

        // 2. Start listening for the 'message' from the Calendly iframe.
        window.addEventListener('message', handleCalendlyLoad);
    </script>
</body>
</html>
